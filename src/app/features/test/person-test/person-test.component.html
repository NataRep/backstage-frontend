<div class="test-container">
  <h2>ğŸ§ª PersonsService Test Component</h2>

  <!-- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ -->
  <div class="status" [class]="statusClass()">
    {{ statusMessage() }}
  </div>

  <!-- Ğ¤Ğ¾Ñ€Ğ¼Ğ° Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ/Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ -->
  <div class="form-section">
    <h3>ğŸ“ Create/Update Person</h3>
    <div class="form-group">
      <label>Person ID (localId from Firebase):</label>
      <input [(ngModel)]="testPerson.personId" placeholder="user-123">
    </div>
    <div class="form-group">
      <label>Full Name:</label>
      <input [(ngModel)]="testPerson.full_name" placeholder="John Doe">
    </div>
    <div class="form-group">
      <label>Email:</label>
      <input [(ngModel)]="testPerson.email" placeholder="john@example.com" type="email">
    </div>
    <div class="form-group">
      <label>Phone:</label>
      <input [(ngModel)]="testPerson.phone" placeholder="+1234567890">
    </div>
    <div class="form-group">
      <label>Telegram:</label>
      <input [(ngModel)]="testPerson.telegram" placeholder="@username">
    </div>
    <div class="form-group">
      <label>WhatsApp:</label>
      <input [(ngModel)]="testPerson.whatsapp" placeholder="+1234567890">
    </div>
    <div class="form-group">
      <label>VK:</label>
      <input [(ngModel)]="testPerson.vk" placeholder="id123456">
    </div>

    <div class="button-group">
      <button (click)="testCreatePerson()" [disabled]="loading">ğŸ¯ Create Person</button>
      <button (click)="testUpdatePerson()" [disabled]="!currentPersonId() || loading">âœï¸ Update Person</button>
    </div>
  </div>

  <!-- ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ -->
  <div class="read-section">
    <h3>ğŸ‘€ Read Operations</h3>

    <!-- ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ´Ğ»Ñ getAll -->
    <div class="query-params">
      <h4>Query Parameters:</h4>
      <div class="param-group">
        <label>Page:</label>
        <input type="number" [(ngModel)]="queryParams.page" min="1">
      </div>
      <div class="param-group">
        <label>Limit:</label>
        <input type="number" [(ngModel)]="queryParams.limit" min="1" max="100">
      </div>
      <div class="param-group">
        <label>IDs (comma separated):</label>
        <input [(ngModel)]="queryParams.idsInput" placeholder="id1,id2,id3">
      </div>
    </div>

    <div class="button-group">
      <button (click)="testGetPersonById()" [disabled]="!currentPersonId() || loading">ğŸ” Get By ID</button>
      <button (click)="testGetAllPersons()" [disabled]="loading">ğŸ“‹ GetAll Persons</button>
    </div>

    <div class="person-display" *ngIf="displayPerson()">
      <h4>Current Person:</h4>
      <pre>{{ displayPerson() | json }}</pre>
    </div>

    <div class="persons-list" *ngIf="displayPersons().length > 0">
      <h4>Persons List ({{ displayPersons().length }}):</h4>
      <div *ngFor="let person of displayPersons()" class="person-item" (click)="selectPerson(person)">
        <strong>{{ person.personId }}</strong> - {{ person.full_name }}
        <div class="person-details">
          ğŸ“§ {{ person.email }} | ğŸ“ {{ person.phone }}
          <span *ngIf="person.telegram">| ğŸ“± {{ person.telegram }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ -->
  <div class="delete-section">
    <h3>ğŸ—‘ï¸ Delete Operations</h3>
    <div class="button-group">
      <button (click)="testDeletePerson()" [disabled]="!currentPersonId() || loading" class="danger">
        ğŸ—‘ï¸ Delete Current Person
      </button>
    </div>
  </div>

  <!-- Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ -->
  <div class="quick-data-section">
    <h3>âš¡ Quick Test Data</h3>
    <div class="button-group">
      <button (click)="loadSampleData(1)" [disabled]="loading">ğŸ‘¤ Load Sample 1</button>
      <button (click)="loadSampleData(2)" [disabled]="loading">ğŸ‘¤ Load Sample 2</button>
      <button (click)="loadSampleData(3)" [disabled]="loading">ğŸ‘¤ Load Sample 3</button>
    </div>
  </div>

  <!-- Ğ›Ğ¾Ğ³Ğ¸ -->
  <div class="logs-section">
    <h3>ğŸ“‹ Operation Logs</h3>
    <div class="logs">
      <div *ngFor="let log of logs()" [class]="log.type" class="log-entry">
        <span class="timestamp">{{ log.timestamp | date:'HH:mm:ss' }}</span>
        <span class="message">{{ log.message }}</span>
      </div>
    </div>
    <button (click)="clearLogs()" class="secondary">Clear Logs</button>
  </div>

  <!-- Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¸ -->
  <div class="state-section">
    <h3>ğŸ” Current State</h3>
    <div class="state-info">
      <p><strong>Current Person ID:</strong> {{ currentPersonId() || 'None' }}</p>
      <p><strong>Total Persons Loaded:</strong> {{ displayPersons().length }}</p>
      <p><strong>Loading:</strong> {{ loading }}</p>
    </div>
  </div>
</div>